<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø·ÙˆØ± â€” Ø­Ø¬Ø² Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</title>
  <style>
    :root{
      --bg:#fbf8f7; --card:#fff; --accent:#b76e79; --accent-dark:#8a4760; --muted:#6b6b6b;
      --shadow: 0 8px 28px rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Naskh Arabic", "Helvetica Neue", Arial; background:var(--bg); color:#111; line-height:1.4}
    header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:linear-gradient(90deg,#fff,#fbf6f8);box-shadow:0 2px 12px rgba(0,0,0,0.04);position:sticky;top:0;z-index:40}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#ffdfe6,#fff0f3);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent-dark);font-size:20px}
    h1{margin:0;font-size:18px}
    .muted{font-size:12px;color:var(--muted)}
    nav{display:flex;gap:8px;align-items:center}
    nav a{color:var(--accent-dark);text-decoration:none;padding:8px 12px;border-radius:10px;font-weight:700}
    nav a:hover{background:#fff0f5}
    .controls{display:flex;gap:10px;align-items:center}
    .search{padding:10px;border-radius:10px;border:1px solid #eee;min-width:180px}
    .btn{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;box-shadow:var(--shadow)}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(0,0,0,0.06)}
    main{max-width:1100px;margin:24px auto;padding:0 16px 80px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .card{background:var(--card);border-radius:16px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;cursor:pointer;transition:transform .18s,box-shadow .18s}
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 48px rgba(0,0,0,0.12)}
    .imgwrap{height:210px;border-radius:12px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#f6f3f4}
    .imgwrap img{width:100%;height:100%;object-fit:cover}
    .meta{text-align:center;padding:6px}
    .title{font-weight:800;font-size:16px;margin-bottom:6px}
    .price{font-weight:900;color:var(--accent-dark);font-size:16px}
    .old{text-decoration:line-through;color:#999;font-size:13px}
    #detailPage,#checkoutPage{display:none;animation:fade .25s}
    @keyframes fade{from{opacity:0}to{opacity:1}}
    #detailPage img{width:100%;max-width:480px;border-radius:14px;box-shadow:0 8px 28px rgba(0,0,0,0.08)}
    .detail-info{margin-top:14px}
    #cartPanel{position:fixed;top:0;bottom:0;right:0;width:380px;max-width:96%;background:var(--card);box-shadow:-14px 0 48px rgba(0,0,0,0.12);transform:translateX(110%);transition:transform .28s ease;z-index:80;display:flex;flex-direction:column}
    #cartPanel.open{transform:translateX(0)}
    #cartHeader{padding:16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,0,0,0.04)}
    #cartBody{padding:14px;overflow:auto;flex:1}
    .cart-item{display:flex;gap:12px;align-items:center;padding:10px 0;border-bottom:1px solid rgba(0,0,0,0.03)}
    .cart-item img{width:64px;height:64px;border-radius:8px;object-fit:cover}
    .cart-foot{padding:16px;border-top:1px solid rgba(0,0,0,0.04)}
    footer{padding:18px;text-align:center;color:var(--muted);position:relative;z-index:0}
    .whatsapp{position:fixed;left:16px;bottom:16px;width:62px;height:62px;border-radius:50%;background:#25D366;display:flex;align-items:center;justify-content:center;box-shadow:0 12px 34px rgba(37,211,102,0.18);z-index:90}
    input,textarea,select{width:100%;padding:10px;margin-top:6px;border-radius:10px;border:1px solid #e6e6e6;font-size:15px}
    form{max-width:620px;margin:14px auto;background:var(--card);padding:18px;border-radius:14px;box-shadow:0 8px 28px rgba(0,0,0,0.06)}
    .tag{display:inline-block;background:#fff0f5;color:var(--accent-dark);padding:6px 10px;border-radius:999px;font-weight:700}
    @media(max-width:880px){ .imgwrap{height:160px} #cartPanel{width:320px} .logo{width:44px;height:44px} }
    @media(max-width:520px){ header{flex-direction:column;align-items:stretch;gap:10px} nav{order:3} main{padding:12px} form{padding:12px} }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">Ø¹</div>
      <div>
        <h1>Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø·ÙˆØ±</h1>
        <div class="muted">Ø®Ù„Ø·Ø§ØªÙ†Ø§ Ø§Ù„Ø®Ø§ØµØ© â€” Ø¬ÙˆØ¯Ø© ÙˆØ£Ù…Ø§Ù†</div>
      </div>
    </div>

    <nav>
      <a href="#" id="link-home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="#" id="link-offers">Ø¹Ø±ÙˆØ¶Ù†Ø§</a>
    </nav>

    <div class="controls">
      <input id="search" class="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ø·Ø±..." aria-label="Ø¨Ø­Ø«">
      <button id="openCartBtn" class="btn" title="Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©">Ø§Ù„Ø³Ù„Ø© (<span id="cartCount">0</span>)</button>
    </div>
  </header>

  <main>
    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <section id="homePage"><div id="grid" class="grid" aria-live="polite"></div></section>

    <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ -->
    <section id="detailPage" style="padding:18px;">
      <button class="btn ghost" id="backBtn">â† Ø±Ø¬ÙˆØ¹</button>
      <div style="display:flex;flex-wrap:wrap;gap:18px;margin-top:16px;align-items:flex-start;justify-content:center">
        <img id="detailImg" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">
        <div class="detail-info">
          <h2 id="detailName"></h2>
          <p id="detailDesc" style="color:var(--muted)"></p>
          <p style="margin-top:8px"><strong>Ø§Ù„Ø³Ø¹Ø±:</strong> <span id="detailPrice"></span></p>
          <div style="margin-top:12px">
            <button id="addToCartDetail" class="btn">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø­Ø¬Ø² (Ù†Ù…ÙˆØ°Ø¬) -->
    <section id="checkoutPage" style="padding:18px;">
      <button class="btn ghost" id="backToCart">â† Ø±Ø¬ÙˆØ¹</button>
      <h2 style="text-align:center;margin-top:10px;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¬Ø²</h2>

      <form id="orderForm" aria-label="Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø­Ø¬Ø²">
        <label>Ø§Ù„Ø§Ø³Ù…</label>
        <input id="custName" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">

        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input id="custPhone" required type="tel" placeholder="Ù…Ø«Ø§Ù„: 0785xxxxxxx">

        <label>Ø§Ù„Ø³ÙƒÙ†</label>
        <input id="custAddress" required placeholder="Ø´Ø§Ø±Ø¹/Ù…Ù†Ø·Ù‚Ø©/Ù…Ø¯ÙŠÙ†Ø©">

        <label>Ø£Ù‚Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¯Ø§Ù„Ø©</label>
        <input id="custNear" required placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø£Ù…Ø§Ù… Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù†ÙˆØ±">

        <div style="display:flex;gap:8px;margin-top:10px">
          <button type="button" id="getLocation" class="btn ghost" style="flex:1">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ</button>
          <div style="flex:2;align-self:center;color:var(--muted);font-size:13px" id="locStatus">(Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</div>
        </div>

        <div style="margin-top:14px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="color:var(--muted)">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</div>
            <div id="summaryTotal" style="font-weight:900;color:var(--accent-dark)">0 Ø¯.Ø¹</div>
          </div>
        </div>

        <button type="submit" class="btn" style="margin-top:14px">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø­Ø¬Ø²</button>
      </form>
    </section>
  </main>

  <!-- ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ø§Ø¦Ù… -->
  <a id="whats" class="whatsapp" target="_blank" rel="noopener" aria-label="ÙˆØ§ØªØ³Ø§Ø¨">
    <svg width="30" height="30" viewBox="0 0 24 24" fill="#fff"><path d="M20.52 3.48A11.8 11.8 0 0012 .5C6 0.5 1.3 5.2 1.3 11.2c0 1.98.52 3.9 1.5 5.6L.5 23.5l6.9-1.8c1.6.8 3.4 1.2 5.4 1.2 6 0 10.7-4.7 10.7-10.7 0-3-1.2-5.8-3.5-7.7z"/></svg>
  </a>

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø³Ù„Ø© -->
  <aside id="cartPanel" aria-hidden="true">
    <div id="cartHeader">
      <h3>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
      <button id="closeCart" class="btn ghost">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
    <div id="cartBody">
      <div id="emptyNotice" style="padding:20px;text-align:center;color:var(--muted)">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>
      <div id="items"></div>
    </div>
    <div class="cart-foot">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</div>
        <div id="total" style="font-weight:900;color:var(--accent-dark)">0 Ø¯.Ø¹</div>
      </div>
      <button id="checkout" class="btn" style="width:100%">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
    </div>
  </aside>

  <footer>Â© <span id="year"></span> Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø·ÙˆØ±</footer>

  <script>
    // ======= Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Ø¶Ø¹ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ù‡Ù†Ø§ (Ù…Ø­Ù„ÙŠ Ø£Ùˆ Ø¯ÙˆÙ„ÙŠ) =======
    const whatsappNumberLocal = "07858644168"; // Ø±Ù‚Ù…Ùƒ
    function toInternationalNumber(raw){
      const digits = String(raw).replace(/\\D/g,'');
      if(!digits) return '';
      if(digits.startsWith('0')) return '964' + digits.slice(1);
      return digits;
    }
    const whatsappNumber = toInternationalNumber(whatsappNumberLocal);
    // ==========================================================

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    const products = [
      {id:"1", name:"Ø¨ØºØ¯Ø§Ø¯", price:7000, image:"https://images.unsplash.com/photo-1600180758890-6d8301a35b9f?w=900&q=80"},
      {id:"2", name:"Ø±Ù‚Ø©", price:7000, image:"https://images.unsplash.com/photo-1585386959984-a4155224a1e1?w=900&q=80"},
      {id:"3", name:"Ù‡Ø¯ÙˆØ¡", price:8000, image:"https://images.unsplash.com/photo-1611162616305-4ec3060a058e?w=900&q=80"},
      {id:"4", name:"Ø¹Ø±Ø¶ Ø®Ø§Øµ (Ø¨ØºØ¯Ø§Ø¯ + Ø±Ù‚Ø© + Ù‡Ø¯ÙˆØ¡)", price:15000, oldPrice:22000, offer:true, image:"https://images.unsplash.com/photo-1600180758890-6d8301a35b9f?w=900&q=80"}
    ];

    const productDesc = "Ø§Ù„Ø¹Ø·Ø± Ù…ØµÙ†ÙˆØ¹ Ù…Ù† Ø®Ù„Ø·Ø© Ø®Ø§ØµØ© Ø¨Ù†Ø§ ÙÙ‚Ø· ÙˆÙ„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø²ÙŠÙˆØª Ù…Ø¶Ø±Ø© Ø£Ùˆ Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø­Ø³Ø§Ø³ÙŠØ©. ØªÙ… Ø§Ù„ØµÙ†Ø¹ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø§Ø¨ØªÙƒØ§Ø±ÙŠØ© Ø­Ø¯ÙŠØ«Ø© ØªÙ…Ù†Ø­Ùƒ Ø«Ø¨Ø§ØªÙ‹Ø§ ÙˆØ£Ù†Ø§Ù‚Ø© ØªØ¯ÙˆÙ….";

    // DOM
    const grid = document.getElementById('grid');
    const search = document.getElementById('search');
    const homePage = document.getElementById('homePage');
    const detailPage = document.getElementById('detailPage');
    const checkoutPage = document.getElementById('checkoutPage');
    const cartPanel = document.getElementById('cartPanel');
    const itemsEl = document.getElementById('items');
    const totalEl = document.getElementById('total');
    const cartCountEl = document.getElementById('cartCount');
    const summaryTotal = document.getElementById('summaryTotal');
    const locStatus = document.getElementById('locStatus');
    const whatsAnchor = document.getElementById('whats');
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    let currentProduct = null;
    let locationLink = '';
    const nf = new Intl.NumberFormat('ar-EG');

    // Ø¶Ø¨Ø· Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¸Ø§Ù‡Ø±
    if(whatsappNumber){
      whatsAnchor.href = `https://wa.me/${whatsappNumber}`;
    } else { whatsAnchor.style.display='none'; console.warn('Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ØºÙŠØ± ØµØ§Ù„Ø­'); }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    function renderProducts(list){
      grid.innerHTML='';
      if(!list.length){ grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:28px;color:var(--muted)">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</div>'; return; }
      list.forEach(p => {
        const el = document.createElement('article');
        el.className = 'card';
        el.innerHTML = `
          <div class="imgwrap"><img src="${p.image}" alt="${escapeHtml(p.name)}"></div>
          <div class="meta">
            <div class="title">${escapeHtml(p.name)}</div>
            ${p.oldPrice?`<div class="old">${nf.format(p.oldPrice)} Ø¯.Ø¹</div>`:''}
            <div class="price">${nf.format(p.price)} Ø¯.Ø¹</div>
          </div>
        `;
        el.onclick = () => showDetail(p);
        grid.appendChild(el);
      });
    }

    // ØªÙØ§ØµÙŠÙ„
    function showDetail(p){
      currentProduct = p;
      homePage.style.display='none'; checkoutPage.style.display='none'; detailPage.style.display='block';
      document.getElementById('detailName').textContent = p.name;
      document.getElementById('detailDesc').textContent = productDesc;
      document.getElementById('detailPrice').textContent = nf.format(p.price) + ' Ø¯.Ø¹';
      document.getElementById('detailImg').src = p.image;
      window.scrollTo({top:0,behavior:'smooth'});
    }
    document.getElementById('backBtn').onclick = ()=>{ detailPage.style.display='none'; homePage.style.display='block'; }

    document.getElementById('addToCartDetail').onclick = ()=>{ if(currentProduct) addToCartById(currentProduct.id); alert('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©'); }

    // Ø³Ù„Ø©
    function addToCartById(id){
      const p = products.find(x=>x.id===id); if(!p) return;
      const found = cart.find(i=>i.id===id);
      if(found) found.qty+=1; else cart.push({...p, qty:1});
      saveCart();
    }
    function saveCart(){ localStorage.setItem('cart', JSON.stringify(cart)); renderCart(); }
    function renderCart(){
      itemsEl.innerHTML='';
      if(cart.length===0){ document.getElementById('emptyNotice').style.display='block'; totalEl.textContent='0 Ø¯.Ø¹'; cartCountEl.textContent='0'; summaryTotal.textContent='0 Ø¯.Ø¹'; return; }
      document.getElementById('emptyNotice').style.display='none';
      let t=0; cart.forEach(item=>{ t+=item.price*item.qty; const row=document.createElement('div'); row.className='cart-item'; row.innerHTML = `<img src="${item.image}" alt=""><div style="flex:1"><div style="font-weight:800">${escapeHtml(item.name)}</div><div style="color:var(--muted);margin-top:6px">${nf.format(item.price)} Ø¯.Ø¹</div><div style="margin-top:8px;display:flex;gap:8px;align-items:center"><input class="qty" type="number" min="1" value="${item.qty}" data-id="${item.id}" style="width:70px"><button class="btn ghost remove" data-id="${item.id}">Ø­Ø°Ù</button></div></div>`; itemsEl.appendChild(row); });
      totalEl.textContent = nf.format(t) + ' Ø¯.Ø¹'; cartCountEl.textContent = cart.reduce((s,i)=>s+i.qty,0); summaryTotal.textContent = nf.format(t) + ' Ø¯.Ø¹';
      itemsEl.querySelectorAll('.remove').forEach(b=>b.onclick=()=>{ cart = cart.filter(x=>x.id!==b.dataset.id); saveCart(); });
      itemsEl.querySelectorAll('.qty').forEach(q=>q.onchange=()=>{ cart = cart.map(x=>x.id===q.dataset.id?{...x,qty:Math.max(1,parseInt(q.value)||1)}:x); saveCart(); });
    }

    // Ø¨Ø­Ø«
    search.addEventListener('input', ()=>{ const q=(search.value||'').trim().toLowerCase(); if(!q) renderProducts(products); else renderProducts(products.filter(p=>p.name.toLowerCase().includes(q))); });

    // ØªÙ†Ù‚Ù„
    document.getElementById('link-home').onclick = (e)=>{ e.preventDefault(); renderProducts(products); homePage.style.display='block'; detailPage.style.display='none'; checkoutPage.style.display='none'; window.scrollTo({top:0,behavior:'smooth'}); }
    document.getElementById('link-offers').onclick = (e)=>{ e.preventDefault(); renderProducts(products.filter(p=>p.offer)); homePage.style.display='block'; detailPage.style.display='none'; checkoutPage.style.display='none'; window.scrollTo({top:0,behavior:'smooth'}); }

    // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ù„Ø©
    document.getElementById('openCartBtn').onclick = ()=> cartPanel.classList.add('open');
    document.getElementById('closeCart').onclick = ()=> cartPanel.classList.remove('open');

    // Ø¯ÙØ¹ -> ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø­Ø¬Ø²
    document.getElementById('checkout').onclick = ()=>{
      if(cart.length===0) return alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©');
      cartPanel.classList.remove('open');
      homePage.style.display='none'; detailPage.style.display='none'; checkoutPage.style.display='block'; window.scrollTo({top:0,behavior:'smooth'});
    }
    document.getElementById('backToCart').onclick = ()=>{ checkoutPage.style.display='none'; homePage.style.display='block'; window.scrollTo({top:0,behavior:'smooth'}); }

    // GPS
    document.getElementById('getLocation').onclick = ()=>{
      locStatus.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...'; if(!navigator.geolocation){ locStatus.textContent='Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹'; return; }
      navigator.geolocation.getCurrentPosition(pos=>{ const {latitude,longitude} = pos.coords; locationLink = `https://www.google.com/maps?q=${latitude},${longitude}`; locStatus.textContent='âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹'; }, err=>{ locStatus.textContent='ØªØ¹Ø°Ù‘Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â€” ØªØ£ÙƒØ¯ Ù…Ù† Ø³Ù…Ø§Ø­ Ø§Ù„Ù…ØªØµÙØ­' }, {enableHighAccuracy:true, timeout:15000});
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
    document.getElementById('orderForm').onsubmit = (e)=>{
      e.preventDefault();
      if(!whatsappNumber){ alert('Ù„Ù… ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'); return; }
      const name = document.getElementById('custName').value.trim();
      const phone = document.getElementById('custPhone').value.trim();
      const addr = document.getElementById('custAddress').value.trim();
      const near = document.getElementById('custNear').value.trim();
      if(!name||!phone||!addr||!near){ alert('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„'); return; }
      const productsList = cart.map(it=>`â€¢ ${it.name} (x${it.qty}) â€” ${nf.format(it.price*it.qty)} Ø¯.Ø¹`).join('\\n');
      const totalAmount = cart.reduce((s,i)=>s+i.price*i.qty,0);
      let message = `Ø·Ù„Ø¨ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯%0A%0AğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}%0AğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}%0AğŸ  Ø§Ù„Ø³ÙƒÙ†: ${addr}%0AğŸ“ Ø£Ù‚Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¯Ø§Ù„Ø©: ${near}%0A%0AğŸ§¾ Ø§Ù„Ø·Ù„Ø¨:%0A${encodeURIComponent(productsList)}%0A%0AğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${nf.format(totalAmount)} Ø¯.Ø¹`;
      if(locationLink) message += `%0A%0AğŸ“Œ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${encodeURIComponent(locationLink)}`;
      message += `%0A%0AğŸ”” Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø¹Ø·ÙˆØ± Ù…ØµÙ†ÙˆØ¹Ø© Ù…Ù† Ø®Ù„Ø·Ø© Ø®Ø§ØµØ© ÙˆÙ„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø²ÙŠÙˆØª Ù…Ø¶Ø±Ø© Ø£Ùˆ Ù…Ø³Ø¨Ø¨Ø© Ø­Ø³Ø§Ø³ÙŠØ©.`;
      const waUrl = `https://wa.me/${whatsappNumber}?text=${message}`;
      window.open(waUrl,'_blank');
      cart = []; saveCart();
      checkoutPage.style.display='none'; homePage.style.display='block';
    }

    // Ø­Ù…Ø§ÙŠØ© Ù†Øµ
    function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',\"'\":'&#39;'}[m])); }

    // init
    function init(){ renderProducts(products); renderCart(); document.getElementById('year').textContent = new Date().getFullYear(); }

    init();
  </script>
</body>
</html>
